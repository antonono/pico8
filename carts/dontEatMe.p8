pico-8 cartridge // http://www.pico-8.com
version 16
__lua__
p = {
	x=64,
	y=-20,
	anim="fall",
	fall={f=0,st=0,sz=4,spd=2/5},
	fly_in_fall={f=16,st=16,sz=3,spd=2/5}
}

function controls()
	if (btn(0)) p.x -= 1
	if (btn(1)) p.x += 1
	if (btn(3)) p.y += 1

	if(p.anim == "fall"
	or p.anim == "fly_in_fall")
	then
  if (btn(2)) then
  	p.anim="fly_in_fall"
  	p.y -= 1.25
  end
 else
		if (btn(2)) p.y -= 1
	end
	
end

function anim(a)
	a.f += a.spd
	if(a.f >= a.st + a.sz) then
		a.f = a.st
	end
	return flr(a.f)*2
end

function anim_player()
	if(p.anim == "fall") then
		return anim(p.fall)
	elseif(p.anim == "fly_in_fall") then
		return anim(p.fly_in_fall)
	end
end

function autofall()
	p.y += 1
end

function _update()

	if(p.anim == "fly_in_fall")
	then p.anim="fall"
	end

	controls()
	autofall()
end

function _draw()
	cls()
	spr(anim_player(),p.x,p.y,2,2)
end
__gfx__
00000aaa0000000000000aaa0000000000000aaa0000000000000aaa000000000000000000000000000000000000000000000000000000000000000000000000
000000aaa0000000000000aaa0000000000000aaa0000600000000aaa00000000000000000000000000000000000000000000000000000000000000000000000
000060077a000000000600077a000060000000077a000600000600077a0000600000000000000000000000000000000000000000000000000000000000000000
000060097a000660000660097a006600006600097a066000000660097a0066000000000000000000000000000000000000000000000000000000000000000000
0000660aaaa666000000660aaaa660000006600aaaa600000000660aaaa660000000000000000000000000000000000000000000000000000000000000000000
000006688a660000000006688a660000000066688a600000000006688a6600000000000000000000000000000000000000000000000000000000000000000000
0000000e8aa0000000000008eaa000000000000e8aa0000000000008eaa000000000000000000000000000000000000000000000000000000000000000000000
0000000aaaa000000000000aaaa000000000000aaaa000000000000aaaa000000000000000000000000000000000000000000000000000000000000000000000
0000000aaaa000000000000aaaa000000000000aaaa000000000000aaaa000000000000000000000000000000000000000000000000000000000000000000000
000000aaaaa00000000000aaaaa00000000000aaaaa00000000000aaaaa000000000000000000000000000000000000000000000000000000000000000000000
000000aaaa000000000000aaaa000000050000aaaa000000000000aaaa0000000000000000000000000000000000000000000000000000000000000000000000
00000aaaa000000005000aaaa000000000500aaaa000000005000aaaa00000000000000000000000000000000000000000000000000000000000000000000000
0055aaa0000000000555aaa0000000000005aaa0000000000555aaa0000000000000000000000000000000000000000000000000000000000000000000000000
055aa55000000000000aa55000000000000aaa5000000000000aa550000000000000000000000000000000000000000000000000000000000000000000000000
00005500000000000000050000000000000000550000000000000500000000000000000000000000000000000000000000000000000000000000000000000000
00005000000000000000050000000000000000050000000000000500000000000000000000000000000000000000000000000000000000000000000000000000
00000ccc0000000000000ccc000000000000bbbbbbb0000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000ccc0000000000000ccc000000000000bbbb000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000060077c000000000060077c000000000060077b00000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000060097c000660000060097c000660000060097b00066000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000660cccc666000000660cccc66600000066bbbbb6660000000000000000000000000000000000000000000000000000000000000000000000000000000000
000006688c660000000006688c660000000006688b66000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000e8cc000000000000e8cc000000000000e8bb0000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000cccc000000000000cccc000000000000bbbb0000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000cccc000000000000cccc000000000000bbbb0000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000ccccc00000000000ccccc00000000000bbbbb0000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000cccc000000000000cccc000000000000bbbb00000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000cccc000000000000cccc000000000000bbbb000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0055ccc0000000000055ccc0000000000055bbb00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
055cc55000000000055cc55000000000055bb5500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00005500000000000000550000000000000055000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00005000000000000000500000000000000050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__gff__
0202020202020202020202020000000002020202020202020202020200000000020202020202000000000000000000000202020202020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
